@model BulgarianHistory.Web.ViewModel.Timeline.TimelineViewModel

@{
    ViewData["Title"] = "Историческа времева линия";
}

<div class="container my-5 bg-dark text-light p-4 rounded shadow">
    <h1 class="text-center text-warning mb-4">История на България</h1>

    <div class="timeline-container overflow-x-auto">
        <svg height="350" width="2000" xmlns="http://www.w3.org/2000/svg">
            <!-- Главна линия -->
            <line x1="50" y1="150" x2="1950" y2="150" stroke="gold" stroke-width="5" />

            <!-- Малки години -->
            @for (int year = 600; year <= 2000; year += 100)
            {
                var x = 50 + (year - 600) * 2;
                <line x1="@x" y1="140" x2="@x" y2="160" stroke="gold" stroke-width="2" />
@:<text x="@x" y="180" text-anchor="middle" fill="white" font-size="12">@year г.</text>
            }

            <!-- Събития -->
            @foreach (var ev in Model.Events)
            {
                var x = 50 + (ev.Year - 600) * 2;
                <a xlink:href="/Event/Details/@ev.Id">
                    <circle cx="@x" cy="150" r="6" fill="orange" />
                    <text x="@x" y="120" text-anchor="middle" fill="white" font-size="13">@ev.Name</text>
                </a>
            }

            <!-- Епохи -->
            @foreach (var era in Model.Eras)
            {
                var firstYear = era.Events.OrderBy(e => e.Year).FirstOrDefault()?.Year ?? 600;
                var x = 50 + (firstYear - 600) * 2;
                <a xlink:href="/Era/Details/@era.Id">
                    <circle cx="@x" cy="220" r="8" fill="skyblue" />
                    <text x="@x" y="245" text-anchor="middle" fill="white" font-size="14">@era.Name</text>
                </a>
            }
        </svg>
    </div>
</div>

<style>
    .timeline-container {
        background-color: #212529;
        border: 2px solid #ffc107;
        padding: 20px;
        overflow-x: auto;
        white-space: nowrap;
    }
</style>
